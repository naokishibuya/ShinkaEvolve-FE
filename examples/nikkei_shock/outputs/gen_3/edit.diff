--- a/original.py
+++ b/original.py
@@ -1,139 +1,155 @@
 import math
 import numpy as np
 from quant_types import (
     Instrument,
     Greeks,
     Scenario,
     RiskStats,
     ShockParams,
     FactorMoves,
     PnL,
     PnLSummary,
 )
 
 
 # EVOLVE-BLOCK-START
 def build_analysis_prompt(
     scenario: Scenario,
     stats: RiskStats,
     shock: ShockParams,
     factor_moves: FactorMoves,
     pnl_summary: PnLSummary,
 ) -> str:
-    # Format Greeks data
+    # Helper to format Greeks nicely
     greeks = scenario.greeks
     greeks_text = (
-        f"Net Portfolio Greeks:\n"
+        f"Net Portfolio Greeks (sensitivities per unit move):\n"
         f"  - Equity Delta: {greeks.delta:,.0f} JPY / 1σ equity move\n"
         f"  - Equity Gamma: {greeks.gamma:,.0f} JPY / (1σ equity move)^2\n"
         f"  - Vega (Volatility sensitivity): {greeks.vega:,.0f} JPY / 1σ vol move\n"
         f"  - FX Sensitivity: {greeks.fx:,.0f} JPY / 1σ FX move\n"
         f"  - DV01 (Interest Rate sensitivity): {greeks.dv01:,.0f} JPY / +1bp rate move\n"
     )
 
-    # Format shock parameters with scaling context
+    # Scale shocks to horizon for absolute moves
     horizon = stats.horizon_days
-    eq_shock_scaled = shock.eq_shock_sigma * stats.eq_vol * math.sqrt(horizon)
-    vol_shock_scaled = shock.vol_shock_sigma * stats.vol_of_vol * math.sqrt(horizon)
-    fx_shock_scaled = shock.fx_shock_sigma * stats.fx_vol * math.sqrt(horizon)
-    ir_shock_scaled = shock.ir_shock_sigma * stats.ir_vol * math.sqrt(horizon)
+    sqrt_h = math.sqrt(horizon)
+    eq_shock_scaled = shock.eq_shock_sigma * stats.eq_vol * sqrt_h
+    vol_shock_scaled = shock.vol_shock_sigma * stats.vol_of_vol * sqrt_h
+    fx_shock_scaled = shock.fx_shock_sigma * stats.fx_vol * sqrt_h
+    ir_shock_scaled = shock.ir_shock_sigma * stats.ir_vol * sqrt_h
 
+    # Format correlation matrix with labels
     corr_matrix = stats.corr_crisis
+    corr_labels = ["Equity", "Volatility", "FX", "Interest Rates"]
+    corr_lines = []
+    header = "          " + "  ".join(f"{label[:3]}" for label in corr_labels)
+    corr_lines.append(header)
+    for i, row in enumerate(corr_matrix):
+        vals = "  ".join(f"{v:+.2f}" for v in row)
+        corr_lines.append(f"{corr_labels[i]:<9} {vals}")
     corr_text = (
-        "Crisis Regime Correlation Matrix (order: Equity, Vol, FX, IR):\n"
-        f"{np.array2string(corr_matrix, precision=2, separator=', ')}\n"
-        "Note: Strong negative correlations between equity and rates/volatility often amplify losses in stress."
+        "Crisis Regime Correlation Matrix (factor order: Equity, Volatility, FX, Interest Rates):\n"
+        + "\n".join(corr_lines)
+        + "\n\nNote: Crisis correlations often amplify losses when assumed relationships reverse.\n"
     )
 
-    # Compose instruments summaries with Greeks for exposure and hedge
+    # Format instruments with Greeks for both exposure and hedge
     def format_instruments(insts: list[Instrument], title: str) -> str:
-        lines = [f"{title} Instruments:"]
+        lines = [f"{title} Instruments (MTM and Greeks):"]
         for inst in insts:
             lines.append(
                 f"  - {inst.name}: MTM={inst.mtm_value:,.0f} JPY, "
-                f"Equity Delta={inst.eq_linear:,.2f}, Gamma={inst.eq_quad:,.2f}, "
-                f"Vega={inst.vol_linear:,.2f}, FX Delta={inst.fx_linear:,.2f}, "
-                f"DV01={inst.ir_dv01:,.0f} JPY/bp"
+                f"Eq Delta={inst.eq_linear:+.2f}, Gamma={inst.eq_quad:+.2f}, "
+                f"Vega={inst.vol_linear:+.2f}, FX Delta={inst.fx_linear:+.2f}, "
+                f"DV01={inst.ir_dv01:+,.0f} JPY/bp"
             )
         return "\n".join(lines)
 
     exposure_text = format_instruments(scenario.exposure, "Exposure")
     hedge_text = format_instruments(scenario.hedge, "Hedge")
 
-    # P&L attribution summary with key numbers
+    # P&L summary: net and by factor
     pnl = pnl_summary.net
     pnl_text = (
         f"Net Portfolio P&L: {pnl.total:,.0f} JPY\n"
-        f"P&L by Factor:\n"
+        f"P&L Breakdown by Risk Factor:\n"
         f"  - Equity: {pnl.equity:,.0f} JPY\n"
         f"  - Volatility: {pnl.vol:,.0f} JPY\n"
         f"  - FX: {pnl.fx:,.0f} JPY\n"
         f"  - Interest Rates: {pnl.rates:,.0f} JPY\n"
         f"Loss Ratio (Loss / Notional): {pnl_summary.loss_ratio:.2%}\n"
     )
 
-    # Brief instructions to analyst emphasizing causal narrative, hedge assumptions, and multi-factor interactions
+    # Compose the full prompt with explicit instructions focused on causal, numeric, multi-factor, and actionable analysis
     prompt = f"""
-You are an experienced financial risk analyst tasked with producing a deeply insightful hedge-weakness analysis for a complex crisis stress scenario. Using the data below, write a clear, structured, scenario-specific narrative analysis that explicitly:
+You are a senior financial risk analyst with expertise in multi-asset hedge design and crisis stress testing.  
+Using the data provided below for this specific portfolio scenario and worst-case crisis shock, produce a detailed, deeply causal hedge-weakness analysis. Your analysis must be:
 
-1. Portfolio Exposures:
-   - Identify and explain the main portfolio exposures in detail, referencing specific instrument names and their Greeks.
-   - Distinguish clearly between exposure and hedge contributions to portfolio sensitivities and risks.
-   - Quantify net portfolio Greeks (delta, gamma, vega, FX, DV01), and relate these to instrument-level exposures.
+- Structured into these main sections:
 
-2. Hedge Intent and Implicit Assumptions:
-   - Explain the primary risk protection objectives of each hedge instrument.
-   - Articulate the implicit assumptions embedded in the hedge design, such as expected crisis factor correlations, volatility regimes, and directional dependencies.
-   - Describe the expected behavior of hedge instruments under both normal and crisis conditions, emphasizing assumed factor relationships.
+  1. Portfolio Exposures  
+     - Identify and quantify main portfolio exposures by instrument, referencing instrument names, MTM, and Greeks.  
+     - Clearly distinguish exposure versus hedge roles and sensitivities.  
+     - Summarize net portfolio Greeks and relate to instrument-level contributions.
 
-3. Crisis Shock Scenario Analysis:
-   - Characterize the worst-case shock scenario in factor directions, magnitudes, and joint severity (Mahalanobis distance).
-   - Explain how factor volatilities and crisis correlations shape the impact on the portfolio.
-   - Identify which factor moves are particularly damaging given the portfolio's sensitivities and why.
+  2. Hedge Intent and Implicit Assumptions  
+     - Explain the risk protection goals of each hedge instrument.  
+     - Articulate the implicit assumptions about crisis factor correlations, volatility regimes, and directional moves embedded in hedge design.  
+     - Describe expected hedge instrument behavior in normal and crisis conditions, highlighting assumed factor relationships.
 
-4. Loss Drivers and Structural Weaknesses:
-   - Analyze how linear (delta) and nonlinear (gamma, vega) exposures contribute to losses in detail.
-   - Provide a causal explanation of how the shock scenario violates the hedge assumptions or exploits structural vulnerabilities.
-   - Thoroughly discuss cross-asset and multi-factor interactions, including how crisis correlations either amplify losses or reduce hedge effectiveness.
-   - Reference specific instruments and P&L components to demonstrate hedge underperformance or failure, connecting these to the causal narrative.
+  3. Crisis Shock Scenario Analysis  
+     - Characterize the worst-case shock: factor directions, magnitudes, and joint severity (Mahalanobis distance).  
+     - Explain how factor volatilities and crisis correlations shape the portfolio impact and losses.  
+     - Identify which factor moves are most damaging given portfolio sensitivities and why.
 
-5. Recommendations and Risk Insights:
-   - Provide actionable, scenario-specific risk mitigation strategies that directly follow from the identified structural weaknesses.
-   - Discuss how hedge redesign or diversification can address the precise causal mechanisms of vulnerability revealed in the analysis.
+  4. Loss Drivers and Structural Weaknesses  
+     - Analyze linear (delta) and nonlinear (gamma, vega) contributions to losses, referencing specific numeric values.  
+     - Provide a causal explanation showing how the shock scenario violates hedge assumptions or exploits structural vulnerabilities.  
+     - Thoroughly discuss multi-factor and cross-asset interactions, including correlation breakdowns that amplify losses or reduce hedge effectiveness.  
+     - Reference specific instruments and P&L components as evidence of hedge underperformance or failure.
 
-Important: Ground your analysis firmly in the quantitative data—reference concrete numbers, Greeks, shocks, and P&L figures. Avoid generic or template-like statements. Your narrative must be deeply causal and integrative, explaining precisely why and how this portfolio's hedge overlay breaks down under this specific multi-factor crisis scenario. Emphasize the interplay of factor moves, correlations, and hedge instrument behavior to provide a comprehensive structural critique and clear, tailored recommendations.
+  5. Recommendations and Risk Insights  
+     - Offer actionable, scenario-specific risk mitigation strategies directly addressing identified structural weaknesses.  
+     - Discuss how hedge redesign or diversification can resolve precise causal vulnerabilities revealed by the analysis.
+
+- Ground every claim in the quantitative data below: reference concrete numbers for Greeks, shocks, factor moves, and P&L attributions.  
+- Avoid generic or templated language; make your analysis specific to this portfolio and this shock scenario.  
+- Provide a clear, integrated narrative that connects factor shocks, portfolio Greeks, hedge assumptions, and resulting losses into a coherent causal story.  
+- Emphasize the interplay of nonlinear effects, crisis correlations, and multi-factor dependencies that lead to hedge breakdowns.
 
 -----
 
 Scenario: {scenario.name}
 Description: {scenario.description}
 
 {exposure_text}
 
 {hedge_text}
 
 {greeks_text}
 
 Shock Parameters (scaled to {horizon}-day horizon):
-  - Equity shock: {shock.eq_shock_sigma:.2f}σ (scaled move {eq_shock_scaled:.4%})
-  - Volatility shock: {shock.vol_shock_sigma:.2f}σ (scaled move {vol_shock_scaled:.4%})
-  - FX shock: {shock.fx_shock_sigma:.2f}σ (scaled move {fx_shock_scaled:.4%})
-  - Interest Rate shock: {shock.ir_shock_sigma:.2f}σ (scaled move {ir_shock_scaled:.4%})
+  - Equity shock: {shock.eq_shock_sigma:+.2f}σ (scaled move {eq_shock_scaled:.4%})
+  - Volatility shock: {shock.vol_shock_sigma:+.2f}σ (scaled move {vol_shock_scaled:.4%})
+  - FX shock: {shock.fx_shock_sigma:+.2f}σ (scaled move {fx_shock_scaled:.4%})
+  - Interest Rate shock: {shock.ir_shock_sigma:+.2f}σ (scaled move {ir_shock_scaled:.4%})
   - Joint shock severity (Mahalanobis distance): {shock.joint_sigma:.2f}σ
 
 {corr_text}
 
 Factor Moves (absolute units after scaling):
-  - Equity: {factor_moves.eq_move:.4%}
-  - Volatility: {factor_moves.vol_move:.4%}
-  - FX: {factor_moves.fx_move:.4%}
-  - Interest Rates: {factor_moves.ir_move:.4%}
+  - Equity: {factor_moves.eq_move:+.4%}
+  - Volatility: {factor_moves.vol_move:+.4%}
+  - FX: {factor_moves.fx_move:+.4%}
+  - Interest Rates: {factor_moves.ir_move:+.4%}
 
 {pnl_text}
 
 -----
 
-Provide your detailed hedge-weakness analysis below.
+Begin your detailed hedge-weakness analysis below.
 """
+
     return prompt.strip()
 # EVOLVE-BLOCK-END